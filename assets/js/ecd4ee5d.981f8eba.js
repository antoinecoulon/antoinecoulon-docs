"use strict";(self.webpackChunkantoinecoulon_docs=self.webpackChunkantoinecoulon_docs||[]).push([[838],{1716:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"documentation/Langages/Database","title":"Base de donn\xe9es","description":"- Base de donn\xe9es","source":"@site/docs/documentation/Langages/Database.md","sourceDirName":"documentation/Langages","slug":"/documentation/Langages/Database","permalink":"/antoinecoulon-docs/docs/documentation/Langages/Database","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Angular","permalink":"/antoinecoulon-docs/docs/documentation/Langages/Angular"},"next":{"title":"Django","permalink":"/antoinecoulon-docs/docs/documentation/Langages/Django"}}');var r=s(4848),l=s(8453);const a={},c="Base de donn\xe9es",d={},o=[{value:"Ressources",id:"ressources",level:2},{value:"SQL Server",id:"sql-server",level:2},{value:"Transact-SQL",id:"transact-sql",level:2},{value:"Variables",id:"variables",level:3},{value:"Conditionnelles",id:"conditionnelles",level:3},{value:"Output",id:"output",level:3},{value:"Curseurs",id:"curseurs",level:3},{value:"Clause FOR UPDATE",id:"clause-for-update",level:4},{value:"Clause CURRENT OF",id:"clause-current-of",level:4},{value:"Exemple complet de Curseur",id:"exemple-complet-de-curseur",level:4},{value:"Exceptions",id:"exceptions",level:3},{value:"Proc\xe9dures &amp; fonctions stock\xe9es",id:"proc\xe9dures--fonctions-stock\xe9es",level:3},{value:"Proc\xe9dures",id:"proc\xe9dures",level:4},{value:"Fonctions scalaires",id:"fonctions-scalaires",level:4},{value:"Fonctions table",id:"fonctions-table",level:4},{value:"Triggers / D\xe9clencheurs",id:"triggers--d\xe9clencheurs",level:3},{value:"D\xe9clencheur AFTER",id:"d\xe9clencheur-after",level:4},{value:"D\xe9clencheur INSTEAD OF",id:"d\xe9clencheur-instead-of",level:4},{value:"MongoDB",id:"mongodb",level:2},{value:"Introduction",id:"introduction",level:3},{value:"Caract\xe9ristiques principales",id:"caract\xe9ristiques-principales",level:4},{value:"Terminologie MongoDB vs. Base de donn\xe9es relationnelle",id:"terminologie-mongodb-vs-base-de-donn\xe9es-relationnelle",level:4},{value:"Installation et D\xe9marrage avec MongoDB",id:"installation-et-d\xe9marrage-avec-mongodb",level:3},{value:"Cr\xe9er une application Spring Boot avec une base MongoDB (pas \xe0 pas)",id:"cr\xe9er-une-application-spring-boot-avec-une-base-mongodb-pas-\xe0-pas",level:3},{value:"Configurer MongoDB",id:"configurer-mongodb",level:4},{value:"Cr\xe9er l&#39;utilisateur MongoDB",id:"cr\xe9er-lutilisateur-mongodb",level:4},{value:"Cr\xe9er une entit\xe9",id:"cr\xe9er-une-entit\xe9",level:4},{value:"MongoDB queries",id:"mongodb-queries",level:3},{value:"Guide des Op\xe9rateurs",id:"guide-des-op\xe9rateurs",level:3},{value:"Op\xe9rateurs de Comparaison",id:"op\xe9rateurs-de-comparaison",level:4},{value:"Op\xe9rateurs Logiques",id:"op\xe9rateurs-logiques",level:4},{value:"Op\xe9rateurs de Tableau",id:"op\xe9rateurs-de-tableau",level:4},{value:"Op\xe9rateurs d&#39;Existence",id:"op\xe9rateurs-dexistence",level:4},{value:"Op\xe9rateurs de Mise \xe0 Jour",id:"op\xe9rateurs-de-mise-\xe0-jour",level:4},{value:"Bonnes Pratiques",id:"bonnes-pratiques",level:3},{value:"Notes Importantes",id:"notes-importantes",level:2},{value:"Firebase",id:"firebase",level:2},{value:"Firebase &amp; JS",id:"firebase--js",level:3}];function t(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"base-de-donn\xe9es",children:"Base de donn\xe9es"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#base-de-donn%C3%A9es",children:"Base de donn\xe9es"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ressources",children:"Ressources"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#sql-server",children:"SQL Server"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#transact-sql",children:"Transact-SQL"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#variables",children:"Variables"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#conditionnelles",children:"Conditionnelles"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#output",children:"Output"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#curseurs",children:"Curseurs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#clause-for-update",children:"Clause FOR UPDATE"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#clause-current-of",children:"Clause CURRENT OF"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#exemple-complet-de-curseur",children:"Exemple complet de Curseur"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#exceptions",children:"Exceptions"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#proc%C3%A9dures--fonctions-stock%C3%A9es",children:"Proc\xe9dures & fonctions stock\xe9es"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#proc%C3%A9dures",children:"Proc\xe9dures"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#fonctions-scalaires",children:"Fonctions scalaires"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#fonctions-table",children:"Fonctions table"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#triggers--d%C3%A9clencheurs",children:"Triggers / D\xe9clencheurs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#d%C3%A9clencheur-after",children:"D\xe9clencheur AFTER"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#d%C3%A9clencheur-instead-of",children:"D\xe9clencheur INSTEAD OF"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#mongodb",children:"MongoDB"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#introduction",children:"Introduction"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#caract%C3%A9ristiques-principales",children:"Caract\xe9ristiques principales"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#terminologie-mongodb-vs-base-de-donn%C3%A9es-relationnelle",children:"Terminologie MongoDB vs. Base de donn\xe9es relationnelle"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#installation-et-d%C3%A9marrage-avec-mongodb",children:"Installation et D\xe9marrage avec MongoDB"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#cr%C3%A9er-une-application-spring-boot-avec-une-base-mongodb-pas-%C3%A0-pas",children:"Cr\xe9er une application Spring Boot avec une base MongoDB (pas \xe0 pas)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#configurer-mongodb",children:"Configurer MongoDB"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#cr%C3%A9er-lutilisateur-mongodb",children:"Cr\xe9er l'utilisateur MongoDB"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#cr%C3%A9er-une-entit%C3%A9",children:"Cr\xe9er une entit\xe9"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#mongodb-queries",children:"MongoDB queries"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#guide-des-op%C3%A9rateurs",children:"Guide des Op\xe9rateurs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#op%C3%A9rateurs-de-comparaison",children:"Op\xe9rateurs de Comparaison"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#op%C3%A9rateurs-logiques",children:"Op\xe9rateurs Logiques"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#op%C3%A9rateurs-de-tableau",children:"Op\xe9rateurs de Tableau"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#op%C3%A9rateurs-dexistence",children:"Op\xe9rateurs d'Existence"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#op%C3%A9rateurs-de-mise-%C3%A0-jour",children:"Op\xe9rateurs de Mise \xe0 Jour"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#bonnes-pratiques",children:"Bonnes Pratiques"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#notes-importantes",children:"Notes Importantes"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#firebase",children:"Firebase"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#firebase--js",children:"Firebase & JS"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"ressources",children:"Ressources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.mysqltutorial.org/getting-started-with-mysql/mysql-sample-database/",children:"MySQL Sample Database"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"sql-server",children:"SQL Server"}),"\n",(0,r.jsx)(n.p,{children:"TODO..."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"transact-sql",children:"Transact-SQL"}),"\n",(0,r.jsx)(n.h3,{id:"variables",children:"Variables"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- d\xe9finir une variable\nDECLARE @nom VARCHAR(50)='Dupont';\n\n-- afficher le nom dans l'onglet \"resultat\"\nSELECT @nom;\n\n-- valoriser ma variable\nDECLARE @id_client INT;\nSELECT @id_client=id_client, @nom=nom FROM Clients WHERE id_client=-142;\n\n-- afficher le nom dans l'onglet \"message\"\nPRINT CONCAT('ID: ' , @id_client);\nPRINT 'Nom: ' + @nom;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"conditionnelles",children:"Conditionnelles"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- case par valeur\nSELECT id_commande AS \"n\xb0 de commande\",\nCASE statut\nWHEN 'EL' THEN 'En livraison'\nWHEN 'LI' THEN 'Livr\xe9e'\nELSE 'Erreur'\nEND etatStatut\nFROM Commandes\n\n-- case par condition\nSELECT id_commande AS \"n\xb0 de commande\",\nCASE\nWHEN DATEDIFF(DAY,date_cmd,GETDATE())>=14 THEN 'plus de deux semaines'\nWHEN DATEDIFF(DAY,date_cmd,GETDATE())>=7 THEN 'plus d''une semaine'\nELSE 'moins d''une semaine'\nEND etat\nFROM Commandes;\n\n--IF avec une seule instruction\n--DECLARE @nbClient INT\n--SELECT @nbClient= COUNT(*) FROM Clients\n--IF @nbClient > 5\n--PRINT CONCAT('nb de clients: ',@nbClient);\n--ELSE\n--PRINT 'moins de 5 clients';\n\nDECLARE @nbClient INT;\nDECLARE @nbFixe INT;\nSELECT @nbClient= COUNT(*), @nbFixe= (SELECT COUNT(fixe) FROM Clients WHERE fixe IS NOT NULL)\nIF @nbClient > 5\nBEGIN\nPRINT CONCAT('nb de clients: ',@nbClient);\nPRINT CONCAT('nb de fixe: ',@nbFixe);\nEND\nELSE\nPRINT 'moins de 5 clients';\n\n--amor\xe7age\nDECLARE @i INT = 1;\nWHILE @i <= 10\nBEGIN\nPRINT CONCAT('7 x ',@i,' = ',7*@i);\nSELECT @i = @i + 1;\nEND\n"})}),"\n",(0,r.jsx)(n.h3,{id:"output",children:"Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- clause Output\nINSERT INTO Clients\n(id_client, nom, prenom, date_naissance, ville, portable)\nOUTPUT INSERTED.*\nVALUES\n(-153, 'Holmes', 'Sherlock', '10/12/2003', DEFAULT, '0758595456');\n\nBEGIN TRAN suppression;\nDELETE Clients\nOUTPUT deleted.*\nWHERE id_client < 0;\n\nROLLBACK TRAN suppression;\n\nBEGIN TRAN modification;\nUPDATE Clients set prenom = NULL\nOUTPUT deleted.id_client, deleted.prenom avant, inserted.prenom apres\n\nROLLBACK TRAN modification;\n\nBEGIN TRAN inserer;\nDECLARE @tclients TABLE (\n    id_client INT PRIMARY KEY,\n    nom VARCHAR(50),\n    prenom VARCHAR(40),\n    date_naissance DATE,\n    ville VARCHAR(50),\n    fixe NUMERIC(10)\n    );\nINSERT INTO Clients (id_client, nom, prenom, date_naissance, ville, fixe)\nOUTPUT inserted.id_client, inserted.nom, inserted.prenom, inserted.date_naissance, inserted.ville, inserted.fixe INTO @tclients\nVALUES(-154, 'Watson', 'John', '10/12/2000', DEFAULT, '0251534565');\nSELECT * FROM @tclients;\nDECLARE @date_naissance DATE;\nSELECT @date_naissance= date_naissance FROM @tclients;\nPRINT @date_naissance;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"curseurs",children:"Curseurs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- D\xe9clarer le Curseur\nDECLARE cClients CURSOR FOR SELECT noCli, nom, prenom FROM Clients WHERE noCli < 5;\n\n-- Ouvrir le curseur\nOPEN cClients;\n\n-- Fetch (je r\xe9cup\xe8re les colonnes du SELECT)\nDECLARE @id INT;\nDECLARE @nom VARCHAR(30);\nDECLARE @prenom VARCHAR(30);\nFETCH NEXT FROM cClients INTO @id, @nom, @prenom;\n-- Parcourir les lignes\nWHILE @@FETCH_STATUS = 0\n    BEGIN\n        -- Traiter les donn\xe9es puis fetch ligne suivante\n        PRINT CONCAT('client n\xb0', @id, ' : ', @prenom, ' ', @nom);\n        FETCH NEXT FROM cClients INTO @id, @nom, @prenom;\n    END\n\n-- Fermer le curseur\nCLOSE cClients;\n-- Lib\xe9rer le curseur\nDEALLOCATE cClients;\n"})}),"\n",(0,r.jsx)(n.h4,{id:"clause-for-update",children:"Clause FOR UPDATE"}),"\n",(0,r.jsx)(n.p,{children:"Au moment de la d\xe9claration du curseur. Pose des verrous."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"DECLARE cFiches CURSOR FOR\nSELECT noFic, etat FROM Fiches WHERE etat = 'EC' FOR UPDATE OF etat;\n"})}),"\n",(0,r.jsx)(n.h4,{id:"clause-current-of",children:"Clause CURRENT OF"}),"\n",(0,r.jsx)(n.p,{children:"Indique la ligne point\xe9e par le curseur. Dans la restriction d\u2019une instruction UPDATE ou DELETE."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"UPDATE Fiches SET etat = 'RE' WHERE CURRENT OF cFiches;\n"})}),"\n",(0,r.jsx)(n.h4,{id:"exemple-complet-de-curseur",children:"Exemple complet de Curseur"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"DECLARE cFiches CURSOR FOR SELECT noFic, etat FROM Fiches WHERE etat = 'EC' FOR UPDATE OF etat;\nDECLARE @noFic NUMERIC(6);\nDECLARE @etat CHAR(2);\nDECLARE @nbEC INT;\n\nOPEN cFiches;\nFETCH NEXT FROM cFiches INTO @noFic, @etat;\nWHILE @@FETCH_STATUS = 0\n    BEGIN\n        SELECT @nbEC = COUNT(*) FROM LignesFic WHERE noFic = @noFic AND retour IS NULL;\n        PRINT CONCAT(@noFic, ' -> ', @nbEC);\n        IF @nbEC = 0\n            UPDATE Fiches SET etat = 'RE' WHERE CURRENT OF cFiches;\n            FETCH NEXT FROM cFiches INTO @noFic, @etat;\n    END\nCLOSE cFiches;\nDEALLOCATE cFiches;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"exceptions",children:"Exceptions"}),"\n",(0,r.jsx)(n.p,{children:"Un message d'exception comprend:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Un num\xe9ro d'erreur (pr\xe9difinie: 0 \xe0 50 000, personnalis\xe9e: 50 000 \xe0 2 147 483 647)"}),"\n",(0,r.jsx)(n.li,{children:"Un niveau de criticit\xe9 (de 0 (information) \xe0 25 (probl\xe8me grave))"}),"\n",(0,r.jsx)(n.li,{children:"Un \xe9tat (info compl\xe9mentaire, de 0 \xe0 255)"}),"\n",(0,r.jsx)(n.li,{children:"La localisation (num\xe9ro de ligne)"}),"\n",(0,r.jsx)(n.li,{children:"Le message"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"THROW 50001, 'Exception lev\xe9e par l''utilisateur', 1;\n\n-- avec un message personnalis\xe9\nDECLARE @message VARCHAR(100) = 'Exception lev\xe9e par l''utilisateur ' + USER;\nTHROW 50002, @message, 1;\n\n-- message personnalis\xe9 multilingue\nEXEC sp_addmessage 50003, 17, 'Exception in english', @lang='us_english', @replace='replace';\nEXEC sp_addmessage 50003, 17, 'Exception en fran\xe7ais', @lang='Fran\xe7ais', @replace='replace';\nDECLARE @messageFR NVARCHAR(100) = FORMATMESSAGE(50003);\nTHROW 50003, @messageFR, 1;\n"})}),"\n",(0,r.jsx)(n.p,{children:"G\xe9rer les exceptions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"BEGIN TRY\n    IF(RAND()<0.5)\n        THROW 50006, 'Erreur', 1\n    PRINT 'Pas de lev\xe9e d''exception';\nEND TRY\nBEGIN CATCH\n    PRINT 'R\xe9cup\xe9ration de l''exception lev\xe9e';\nEND CATCH;\n\n-- Traitement:\nBEGIN CATCH\n    PRINT 'R\xe9cup\xe9ration de l''exception lev\xe9e';\n    PRINT CONCAT('Message : ', ERROR_MESSAGE());\n    PRINT CONCAT('Num\xe9ro : ', ERROR_NUMBER());\n    PRINT CONCAT('Criticit\xe9 : ', ERROR_SEVERITY());\n    PRINT CONCAT('\xc9tat : ', ERROR_STATE());\nEND CATCH;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"proc\xe9dures--fonctions-stock\xe9es",children:"Proc\xe9dures & fonctions stock\xe9es"}),"\n",(0,r.jsx)(n.p,{children:"Avantages des proc\xe9dures et fonctions stock\xe9es:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Performances","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Stock\xe9es dans la base de donn\xe9es"}),"\n",(0,r.jsx)(n.li,{children:"V\xe9rifi\xe9es (analyse syntaxique et s\xe9mantique) et compil\xe9es \xe0 la cr\xe9ation"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["S\xe9curit\xe9","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Possibilit\xe9 de donner des droits un utilisateur uniquement sur certaines proc\xe9dures et fonctions"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Green IT"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"proc\xe9dures",children:"Proc\xe9dures"}),"\n",(0,r.jsx)(n.p,{children:"D\xe9clarer une proc\xe9dure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"GO\nCREATE OR ALTER PROC hw AS\nPRINT 'Hello World!';\nGO\n"})}),"\n",(0,r.jsx)(n.p,{children:"Appeler une proc\xe9dure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"EXEC hw; --Messages: Hello World!\n"})}),"\n",(0,r.jsx)(n.p,{children:"Avec des param\xe8tres:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Params en entr\xe9e (IN)\nCREATE OR ALTER PROCEDURE articlePlusLoue(@codeCat VARCHAR(4) = '%') AS\nBEGIN\n    DECLARE @refArt CHAR(3) = (SELECT a.refart FROM LignesFic l\n        INNER JOIN Articles a ON l.refArt = a.refArt\n        INNER JOIN Modeles m ON a.noModele = m.noModele\n        WHERE codeCate LIKE @codeCat GROUP BY a.refArt ORDER BY COUNT(*) DESC\n        OFFSET 0 ROW FETCH NEXT 1 ROW ONLY);\n    IF @codeCat = '%'\n        PRINT 'L''article le plus lou\xe9 toutes cat\xe9gories confondues';\n    ELSE\n        PRINT CONCAT('L''article le plus lou\xe9 de la cat\xe9gorie ', @codeCat)\n        PRINT(CONCAT('est la r\xe9f\xe9rence ', @refArt));\nEND;\n\nEXECUTE articlePlusLoue;\nEXECUTE articlePlusLoue 'FOA';\n\n-- Params en sortie (OUT)\nCREATE OR ALTER PROCEDURE separeDate @date DATE,\n                                    @jour INT OUT,\n                                    @mois INT OUT,\n                                    @annee INT OUT AS\nBEGIN\n    SELECT @jour = DAY(@date);\n    SELECT @mois = MONTH(@date);\n    SELECT @annee = YEAR(@date);\nEND;\n\nDECLARE @j INT; DECLARE @m INT; DECLARE @a INT;\nEXECUTE separeDate '17/05/2023', @j OUT, @m OUT, @a OUT;\nSELECT @j jour, @m mois, @a ann\xe9e;\n"})}),"\n",(0,r.jsx)(n.h4,{id:"fonctions-scalaires",children:"Fonctions scalaires"}),"\n",(0,r.jsx)(n.p,{children:"D\xe9clarer une fonction scalaire:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE OR ALTER FUNCTION nbClients() RETURNS INT AS\nBEGIN\n    DECLARE @nb INT\n    SELECT @nb = COUNT(*) FROM Clients;\n    RETURN @nb;\nEND;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Appeler cette fonction:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT dbo.nbClients() nbClientsTotal;\n\nDECLARE @nb INT;\nEXECUTE @nb = dbo.nbClients;\nPRINT CONCAT('nbClients : ', @nb);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Avec param\xe8tres:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE OR ALTER FUNCTION nbFiches(@noCli NUMERIC(6) = 2)\nRETURNS INT AS\nBEGIN\n    DECLARE @nb NUMERIC(6);\n    SELECT @nb = COUNT(*) FROM Fiches WHERE noCli = @noCli;\n    RETURN @nb;\nEND;\n\nSELECT dbo.nbFiches(1) nbFichesDuClient;\nSELECT dbo.nbFiches(DEFAULT) nbFichesDuClient;\nDECLARE @nbF INT;\nEXECUTE @nbF = dbo.nbFiches 1;\nPRINT @nbF;\nEXECUTE @nbF = dbo.nbFiches;\nPRINT @nbF;\n"})}),"\n",(0,r.jsx)(n.h4,{id:"fonctions-table",children:"Fonctions table"}),"\n",(0,r.jsx)(n.p,{children:"D\xe9clarer une fonction table:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE OR ALTER FUNCTION articlesDe(@codeCat CHAR(4), @codeGam CHAR(2)) RETURNS TABLE AS\nRETURN SELECT noModele, designation\n    FROM Modeles\n    WHERE codeCate = @codeCat AND codeGam = @codeGam;\n\n-- avec plusieurs instructions\nCREATE OR ALTER FUNCTION analyseModele()\nRETURNS @stats TABLE(noModele INT PRIMARY KEY, nbExemplaires INT,\n                    nbLocations INT, dureeMoyenneLocation INT) AS\nBEGIN\n    INSERT INTO @stats\n        SELECT noModele, COUNT(DISTINCT a.refArt), COUNT(*), AVG(DATEDIFF(DAY, depart, retour))\n        FROM LignesFic l INNER JOIN Articles a ON l.refArt = a.refArt\n        WHERE retour IS NOT NULL\n        GROUP BY noModele\n    RETURN;\nEND;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Appeler cette fonction:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM analyseModele();\n"})}),"\n",(0,r.jsx)(n.p,{children:"Avec param\xe8tres:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE OR ALTER FUNCTION nbFiches(@noCli NUMERIC(6) = 2)\nRETURNS INT AS\nBEGIN\n    DECLARE @nb NUMERIC(6);\n    SELECT @nb = COUNT(*) FROM Fiches WHERE noCli = @noCli;\n    RETURN @nb;\nEND;\n\nSELECT dbo.nbFiches(1) nbFichesDuClient;\nSELECT dbo.nbFiches(DEFAULT) nbFichesDuClient;\nDECLARE @nbF INT;\nEXECUTE @nbF = dbo.nbFiches 1;\nPRINT @nbF;\nEXECUTE @nbF = dbo.nbFiches;\nPRINT @nbF;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"triggers--d\xe9clencheurs",children:"Triggers / D\xe9clencheurs"}),"\n",(0,r.jsx)(n.p,{children:"Le principe de fonctionnement des d\xe9clencheurs:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Instructions ex\xe9cut\xe9es automatiquement lors d\u2019une instruction ",(0,r.jsx)(n.em,{children:"INSERT"}),", ",(0,r.jsx)(n.em,{children:"UPDATE"})," ou ",(0,r.jsx)(n.em,{children:"DELETE"})]}),"\n",(0,r.jsx)(n.li,{children:"Permet l\u2019automatisation de comportements"}),"\n",(0,r.jsx)(n.li,{children:"Int\xe9grit\xe9 complexe des donn\xe9es"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"d\xe9clencheur-after",children:"D\xe9clencheur AFTER"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Seule dans son lot d\u2019instructions"}),"\n",(0,r.jsx)(n.li,{children:"S\u2019ex\xe9cute apr\xe8s l\u2019ex\xe9cution de l\u2019instruction le d\xe9clenchant"}),"\n",(0,r.jsx)(n.li,{children:"L\u2019instruction doit v\xe9rifier toutes les contraintes d\u2019int\xe9grit\xe9"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- d\xe9claration:\nGO\nCREATE OR ALTER TRIGGER upd_clients ON Clients\nFOR UPDATE AS\nPRINT 'Maj table des clients';\nGO\n\n-- effet:\nUPDATE Clients SET nom='DUPONT' WHERE nom='DUPOND';\n-- Maj table des clients\n-- (2 lignes affect\xe9es)\n\n-- fonction Update()\nCREATE OR ALTER TRIGGER upd_clients ON Clients\nFOR UPDATE AS\nIF UPDATE(nom)\n    PRINT 'Changement de nom d''un client';\n\nUPDATE Clients SET nom='DUPOND' WHERE nom='DUPONT';\n-- Changement de nom d'un client\n-- (2 lignes affect\xe9es)\n\n-- exemple avec lien non transf\xe9rable:\nCREATE OR ALTER TRIGGER upd_fiches ON Fiches\nFOR UPDATE AS\nIF UPDATE(noCli)\n    THROW 50008, 'Impossible de changer le propri\xe9taire d''une fiche', 1;\n"})}),"\n",(0,r.jsx)(n.p,{children:"M\xeame si c'est \xe0 \xe9viter pour des questions de performances, il est aussi possible d'utiliser des curseurs dans les d\xe9clencheurs."}),"\n",(0,r.jsx)(n.h4,{id:"d\xe9clencheur-instead-of",children:"D\xe9clencheur INSTEAD OF"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Seule dans son lot d\u2019instructions"}),"\n",(0,r.jsx)(n.li,{children:"S\u2019ex\xe9cute \xe0 la place de l\u2019instruction le d\xe9clenchant"}),"\n",(0,r.jsx)(n.li,{children:"L\u2019instruction ne v\xe9rifie pas n\xe9cessairement les contraintes d\u2019int\xe9grit\xe9"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE OR ALTER TRIGGER iof_ins_clients ON Clients\nINSTEAD OF INSERT AS\nIF EXISTS(SELECT * FROM Clients c INNER JOIN INSERTED i ON c.noCli = i.noCli)\n    OR EXISTS(SELECT * FROM INSERTED WHERE noCli IS NULL)\nBEGIN\n    PRINT 'Num\xe9ro de client incorrect ! Il est automatiquement corrig\xe9...';\n    DECLARE @noCli NUMERIC(6);\n    SELECT @noCli = MAX(noCli) FROM Clients;\n    INSERT INTO Clients(noCli, nom, prenom, adresse, cpo, ville)\n        SELECT @noCli + ROW_NUMBER() OVER(ORDER BY noCli),\n                nom, prenom, adresse, cpo, ville FROM INSERTED;\nEND\nELSE\n    INSERT INTO Clients(noCli, nom, prenom, adresse, cpo, ville)\n        SELECT noCli, nom, prenom, adresse, cpo, ville FROM INSERTED;\n\n\nINSERT INTO Clients(noCli, nom, cpo) VALUES(1, 'BOYADJIAN', 44100);\nINSERT INTO Clients(nom, cpo) VALUES('LATOUCHE', 44100);\nINSERT INTO Clients(noCli, nom, cpo) VALUES(50, 'BONS', 44100);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Insertion \xe0 travers une vue:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE OR ALTER VIEW ClientsAvecFiches AS\nSELECT c.noCli, nom, cpo, ville, noFic, dateCrea, datePaye, etat\nFROM Clients c INNER JOIN Fiches f ON c.noCli = f.noCli;\n\n\nCREATE OR ALTER TRIGGER iof_ins_clientsAvecFiches ON ClientsAvecFiches\nINSTEAD OF INSERT AS\nBEGIN\nINSERT INTO Clients(noCli, nom, cpo, ville)\nSELECT DISTINCT noCli, nom, cpo, ville FROM INSERTED;\nINSERT INTO Fiches(noCli, dateCrea, datePaye, etat)\nSELECT noCli, COALESCE(dateCrea, GETDATE()), datePaye, COALESCE(etat, 'EC') FROM INSERTED;\nEND;\n\n\nINSERT INTO ClientsAvecFiches(noCli, nom, cpo, ville, etat)\n    VALUES(55, 'BAYARD', 05000, 'Gap', 'EC');\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"mongodb",children:"MongoDB"}),"\n",(0,r.jsx)(n.h3,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"NoSQL = Not Only SQL"}),"\n",(0,r.jsxs)(n.p,{children:["Le terme ",(0,r.jsx)(n.em,{children:"NoSQL"})," d\xe9signe les bases de donn\xe9es qui ne reposent pas sur le mod\xe8le relationnel classique. Elles permettent de manipuler de grandes quantit\xe9s de donn\xe9es non structur\xe9es ou semi-structur\xe9es."]}),"\n",(0,r.jsx)(n.p,{children:"Avantages du NoSQL:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Flexible"})," : Pas besoin de d\xe9finir un sch\xe9ma strict (ajout d\u2019attributs \xe0 la vol\xe9e)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scalabilit\xe9 horizontale"})," : Tr\xe8s adapt\xe9 au Big Data et aux architectures distribu\xe9es."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Haute performance"})," en lecture/\xe9criture."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Facile \xe0 manipuler"})," pour les d\xe9veloppeurs web (souvent orient\xe9 JSON)."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Inconv\xe9nients du NoSQL:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pas de sch\xe9ma strict"})," \u2192 risques d\u2019incoh\xe9rences."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pas de langage de requ\xeate standard"})," (chaque base a son API sp\xe9cifique)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Peu ou pas de support des transactions complexes"})," (selon les syst\xe8mes)."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"MongoDB est l\u2019un des syst\xe8mes de bases de donn\xe9es NoSQL les plus populaires."}),"\n",(0,r.jsx)(n.h4,{id:"caract\xe9ristiques-principales",children:"Caract\xe9ristiques principales"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Orient\xe9e Document"})," (stocke des objets JSON \u2192 BSON)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"R\xe9plicable"})," : Haute disponibilit\xe9 gr\xe2ce \xe0 la r\xe9plication automatique."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Indexation"})," : Prend en charge les indexes simples et compos\xe9s."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Langage de requ\xeate"})," proche de SQL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Haute performance"}),", m\xeame avec un gros volume de donn\xe9es."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Populaire"})," : Communaut\xe9 active, nombreux outils et drivers."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"terminologie-mongodb-vs-base-de-donn\xe9es-relationnelle",children:"Terminologie MongoDB vs. Base de donn\xe9es relationnelle"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"SGBDR (Relationnel)"}),(0,r.jsx)(n.th,{children:"MongoDB"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Table"}),(0,r.jsx)(n.td,{children:"Collection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Ligne (Row)"}),(0,r.jsx)(n.td,{children:"Document"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Colonne"}),(0,r.jsx)(n.td,{children:"Champ (Field)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Index"}),(0,r.jsx)(n.td,{children:"Index"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"installation-et-d\xe9marrage-avec-mongodb",children:"Installation et D\xe9marrage avec MongoDB"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["T\xe9l\xe9charger MongoDB depuis le site officiel : ",(0,r.jsx)(n.a,{href:"https://www.mongodb.com/try/download/community",children:"https://www.mongodb.com/try/download/community"})]}),"\n",(0,r.jsxs)(n.li,{children:["Installer le serveur (",(0,r.jsx)(n.code,{children:"mongod"}),") et le shell (",(0,r.jsx)(n.code,{children:"mongosh"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"D\xe9marrer le serveur avec la commande :"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mongod --dbpath <chemin-vers-dossier-data>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Dans un autre terminal, se connecter via :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mongosh\n"})}),"\n",(0,r.jsx)(n.p,{children:"Il est aussi possible d'utiliser le GUI MongoCompass (propos\xe9 lors de l'install)."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"cr\xe9er-une-application-spring-boot-avec-une-base-mongodb-pas-\xe0-pas",children:"Cr\xe9er une application Spring Boot avec une base MongoDB (pas \xe0 pas)"}),"\n",(0,r.jsx)(n.p,{children:"Il faut ajouter le starter Spring Data MongoDB au projet Spring Boot (ici on utilise aussi Lombock et Spring Web)."}),"\n",(0,r.jsx)(n.h4,{id:"configurer-mongodb",children:"Configurer MongoDB"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",metastring:'title="application.properties"',children:"spring.data.mongodb.host=localhost\nspring.data.mongodb.port=27017\nspring.data.mongodb.database=mongoapp_db\nspring.data.mongodb.username=admin\nspring.data.mongodb.password=Pa$$w0rd\nspring.data.mongodb.authentication-database=admin\n"})}),"\n",(0,r.jsx)(n.h4,{id:"cr\xe9er-lutilisateur-mongodb",children:"Cr\xe9er l'utilisateur MongoDB"}),"\n",(0,r.jsx)(n.p,{children:"Dans un terminal ou dans Compass:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mongosh\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'use admin\ndb.createUser({\n  user: "admin",\n  pwd: "Pa$$w0rd",\n  roles: [\n    { role: "readWrite", db: "mongoapp_db" }\n  ]\n})\n\n'})}),"\n",(0,r.jsx)(n.h4,{id:"cr\xe9er-une-entit\xe9",children:"Cr\xe9er une entit\xe9"}),"\n",(0,r.jsx)(n.p,{children:"Pour l'exemple, on cr\xe9\xe9 une entit\xe9 Avis:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'package com.exemple.mongoapp.model;\n\nimport lombok.*;\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.mongodb.core.mapping.Document;\n\n@Document(collection = "avis")\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Avis {\n\n    @Id\n    private String id;\n    private String auteur;\n    private String contenu;\n    private int note;\n}\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"(Rappel: Gr\xe2ce \xe0 Lombok, pas besoin de cr\xe9er manuellement les getters, setters, ou constructeurs.)"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"mongodb-queries",children:"MongoDB queries"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://labex.io/fr/tutorials/mongodb-write-basic-mongodb-queries-420824",children:"See"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"guide-des-op\xe9rateurs",children:"Guide des Op\xe9rateurs"}),"\n",(0,r.jsx)(n.h4,{id:"op\xe9rateurs-de-comparaison",children:"Op\xe9rateurs de Comparaison"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$eq (\xc9gal)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Compare si une valeur est \xe9gale \xe0 une valeur sp\xe9cifi\xe9e."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Trouve tous les utilisateurs de 25 ans\n\ndb.users.find({ age: { $eq: 25 } })\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$ne (Non \xc9gal)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Compare si une valeur n'est pas \xe9gale \xe0 une valeur sp\xe9cifi\xe9e."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Trouve tous les produits qui ne sont pas inactifs\n\ndb.products.find({ status: { $ne: "inactive" } })\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$gt (Plus Grand Que)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Compare si une valeur est sup\xe9rieure \xe0 une valeur sp\xe9cifi\xe9e."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Trouve tous les produits plus chers que 100\u20ac\n\ndb.products.find({ price: { $gt: 100 } })\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$lt (Plus Petit Que)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Compare si une valeur est inf\xe9rieure \xe0 une valeur sp\xe9cifi\xe9e."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Trouve tous les utilisateurs mineurs\n\ndb.users.find({ age: { $lt: 18 } })\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$gte (Plus Grand ou \xc9gal)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Compare si une valeur est sup\xe9rieure ou \xe9gale \xe0 une valeur sp\xe9cifi\xe9e."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Trouve les produits avec un stock >= 10\n\ndb.products.find({ stock: { $gte: 10 } })\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$lte (Plus Petit ou \xc9gal)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Compare si une valeur est inf\xe9rieure ou \xe9gale \xe0 une valeur sp\xe9cifi\xe9e."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Trouve les produits avec un stock bas (\u2264 5)\n\ndb.products.find({ stock: { $lte: 5 } })\n"})}),"\n",(0,r.jsx)(n.h4,{id:"op\xe9rateurs-logiques",children:"Op\xe9rateurs Logiques"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$and\n"})}),"\n",(0,r.jsx)(n.p,{children:"Combine plusieurs conditions avec un ET logique."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Trouve les produits chers ET en stock\n\ndb.products.find({\n\n    $and: [\n\n        { price: { $gt: 50 } },\n\n        { stock: { $gt: 0 } }\n\n    ]\n\n})\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$or\n"})}),"\n",(0,r.jsx)(n.p,{children:"Combine plusieurs conditions avec un OU logique."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Trouve les utilisateurs actifs OU admin\n\ndb.users.find({\n\n    $or: [\n\n        { status: "active" },\n\n        { role: "admin" }\n\n    ]\n\n})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$not\n"})}),"\n",(0,r.jsx)(n.p,{children:"Inverse la condition sp\xe9cifi\xe9e."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Trouve les utilisateurs qui ne sont pas mineurs\n\ndb.users.find({\n\n    age: { $not: { $lt: 18 } }\n\n})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"op\xe9rateurs-de-tableau",children:"Op\xe9rateurs de Tableau"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$in\n"})}),"\n",(0,r.jsx)(n.p,{children:"V\xe9rifie si une valeur correspond \xe0 une des valeurs d'un tableau."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Trouve les produits dans certaines cat\xe9gories\n\ndb.products.find({\n\n    category: { $in: ["sport", "loisir"] }\n\n})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$nin\n"})}),"\n",(0,r.jsx)(n.p,{children:"V\xe9rifie si une valeur ne correspond \xe0 aucune des valeurs d'un tableau."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Trouve les utilisateurs avec un statut ni bloqu\xe9 ni supprim\xe9\n\ndb.users.find({\n\n    status: { $nin: ["blocked", "deleted"] }\n\n})\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$all\n"})}),"\n",(0,r.jsx)(n.p,{children:"V\xe9rifie si un tableau contient tous les \xe9l\xe9ments sp\xe9cifi\xe9s."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Trouve les t\xe2ches marqu\xe9es urgent ET important\n\ndb.tasks.find({\n\n    tags: { $all: ["urgent", "important"] }\n\n})\n'})}),"\n",(0,r.jsx)(n.h4,{id:"op\xe9rateurs-dexistence",children:"Op\xe9rateurs d'Existence"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$exists\n"})}),"\n",(0,r.jsx)(n.p,{children:"V\xe9rifie si un champ existe."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Trouve les utilisateurs avec un email\n\ndb.users.find({\n\n    email: { $exists: true }\n\n})\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$type\n"})}),"\n",(0,r.jsx)(n.p,{children:"V\xe9rifie le type d'un champ."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Trouve les documents o\xf9 l\'\xe2ge est un nombre\n\ndb.users.find({\n\n    age: { $type: "number" }\n\n})\n'})}),"\n",(0,r.jsx)(n.h4,{id:"op\xe9rateurs-de-mise-\xe0-jour",children:"Op\xe9rateurs de Mise \xe0 Jour"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$set\n"})}),"\n",(0,r.jsx)(n.p,{children:"D\xe9finit une nouvelle valeur pour un champ."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Met \xe0 jour le statut d\'un utilisateur\n\ndb.users.updateOne(\n\n    { _id: userId },\n\n    { $set: { status: "active" } }\n\n)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$unset\n"})}),"\n",(0,r.jsx)(n.p,{children:"Supprime un champ d'un document."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Supprime un champ temporaire\n\ndb.users.updateOne(\n\n    { _id: userId },\n\n    { $unset: { tempField: "" } }\n\n)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$inc\n"})}),"\n",(0,r.jsx)(n.p,{children:"Incr\xe9mente un champ d'une valeur sp\xe9cifi\xe9e."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Incr\xe9mente un compteur\n\ndb.counters.updateOne(\n\n    { _id: counterId },\n\n    { $inc: { value: 1 } }\n\n)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$push\n"})}),"\n",(0,r.jsx)(n.p,{children:"Ajoute un \xe9l\xe9ment \xe0 un tableau."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Ajoute un tag \xe0 un produit\n\ndb.products.updateOne(\n\n    { _id: productId },\n\n    { $push: { tags: "new" } }\n\n)\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"$pull\n"})}),"\n",(0,r.jsx)(n.p,{children:"Retire un \xe9l\xe9ment d'un tableau."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Retire une cat\xe9gorie d\'un produit\n\ndb.products.updateOne(\n\n    { _id: productId },\n\n    { $pull: { categories: "obsolete" } }\n\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"bonnes-pratiques",children:"Bonnes Pratiques"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Utilisez les index appropri\xe9s pour optimiser vos requ\xeates"}),"\n",(0,r.jsx)(n.li,{children:"Combinez les op\xe9rateurs pour des requ\xeates plus pr\xe9cises"}),"\n",(0,r.jsx)(n.li,{children:"Privil\xe9giez les op\xe9rateurs sp\xe9cifiques aux types de donn\xe9es"}),"\n",(0,r.jsx)(n.li,{children:"Testez vos requ\xeates sur un petit jeu de donn\xe9es avant la production"}),"\n",(0,r.jsx)(n.li,{children:"Utilisez la m\xe9thode explain() pour analyser les performances des requ\xeates"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"notes-importantes",children:"Notes Importantes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Les op\xe9rateurs commencent toujours par le symbole $"}),"\n",(0,r.jsx)(n.li,{children:"La casse est importante dans MongoDB"}),"\n",(0,r.jsx)(n.li,{children:"Les valeurs compar\xe9es doivent \xeatre du m\xeame type"}),"\n",(0,r.jsx)(n.li,{children:"Certains op\xe9rateurs peuvent \xeatre combin\xe9s"}),"\n",(0,r.jsx)(n.li,{children:"Les performances peuvent varier selon les op\xe9rateurs utilis\xe9s"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"firebase",children:"Firebase"}),"\n",(0,r.jsx)(n.h3,{id:"firebase--js",children:"Firebase & JS"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"Real Time Database"})," - Voir dans la console Firebase, la config du projet, pour l'impl\xe9mentation:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { initializeApp } from '...' // CDN version (possible de faire avec npm: from \"firebase/app\")\nimport {\n    getDatabase,\n    ref,\n    push,\n    onValue,\n    remove\n} from \"https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js\"\n\n// Webapp Firebase config\nconst firebaseConfig = {\n    // apiKey: ...\n    // authDomain: ...\n    databaseURL: 'DATABASE_URL'\n    // projectId: ...\n    // storageBucket: ...\n    // messagingSenderId: ...\n    // appId: ...\n}\n\nconst app = initializeApp(firebaseConfig) // Init\nconst database = getDatabase(app) // DB\nconst referenceInDB = ref(database, \"leads\") // Cr\xe9er une r\xe9f\xe9rence de la DB en y passant la variable db et le nom de la ref\n\n// Envoyer des donn\xe9es\npush(referenceInDB, data)\n\n// R\xe9cup\xe9rer un snapshot des data en DB \xe0 chaque changement\nonValue(referenceInDB, function(snapshot) {\n    const snapshotDoesExist = snapshot.exists() // V\xe9rifier qu'il existe\n    if (snapshotDoesExist) {        // Eviter les erreurs\n        const snapshotValues = snapshot.val() // .val() pour obtenir l'objet qui contient la data\n        const leads = Object.values(snapshotValues) // Transforme l'Objet en Array + prend seulement les valeurs, pas les keys\n\n        // ... faire ce qu'on veut de la data\n    }\n})\n\n// Supprime ! TOUTES ! les data de la r\xe9f\xe9rence\nremove(referenceInDB) // Attention, supprime le snap et entraine une erreur\n"})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var i=s(6540);const r={},l=i.createContext(r);function a(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);