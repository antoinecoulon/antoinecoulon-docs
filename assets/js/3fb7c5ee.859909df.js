"use strict";(self.webpackChunkantoinecoulon_docs=self.webpackChunkantoinecoulon_docs||[]).push([[3831],{6890:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"documentation/Langages/Django","title":"Django","description":"- Django","source":"@site/docs/documentation/Langages/Django.md","sourceDirName":"documentation/Langages","slug":"/documentation/Langages/Django","permalink":"/antoinecoulon-docs/docs/documentation/Langages/Django","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Base de donn\xe9es","permalink":"/antoinecoulon-docs/docs/documentation/Langages/Database"},"next":{"title":"Flutter","permalink":"/antoinecoulon-docs/docs/documentation/Langages/Flutter"}}');var o=a(4848),i=a(8453);const s={},r="Django",l={},d=[{value:"Setup a Django project",id:"setup-a-django-project",level:2},{value:"Set up a virtual environment",id:"set-up-a-virtual-environment",level:3},{value:"Install Django",id:"install-django",level:3},{value:"Pin your project dependencies",id:"pin-your-project-dependencies",level:3},{value:"Set up a Django project",id:"set-up-a-django-project",level:3},{value:"Set up a Django app",id:"set-up-a-django-app",level:3},{value:"Register the app",id:"register-the-app",level:3},{value:"Command Reference",id:"command-reference",level:3},{value:"Models",id:"models",level:2},{value:"Example (Model)",id:"example-model",level:3},{value:"Migrations",id:"migrations",level:3}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"django",children:"Django"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"#django",children:"Django"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"#setup-a-django-project",children:"Setup a Django project"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#set-up-a-virtual-environment",children:"Set up a virtual environment"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#install-django",children:"Install Django"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#pin-your-project-dependencies",children:"Pin your project dependencies"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#set-up-a-django-project",children:"Set up a Django project"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#set-up-a-django-app",children:"Set up a Django app"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#register-the-app",children:"Register the app"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#command-reference",children:"Command Reference"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"#models",children:"Models"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#example-model",children:"Example (Model)"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#migrations",children:"Migrations"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"Docs:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://docs.djangoproject.com/",children:"Documentation officielle"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://realpython.com/django-setup/",children:"Django Setup"})}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"setup-a-django-project",children:"Setup a Django project"}),"\n",(0,o.jsx)(n.p,{children:"First, you need to have Python installed and understand how to work with virtual environments (venv) and Python's package manager (pip)."}),"\n",(0,o.jsx)(n.h3,{id:"set-up-a-virtual-environment",children:"Set up a virtual environment"}),"\n",(0,o.jsx)(n.p,{children:"When you\u2019re ready to start your new Django web application, create a new folder and navigate into it. In this folder, you\u2019ll set up a new virtual environment using your command line:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"python3 -m venv env\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This command sets up a new virtual environment named ",(0,o.jsx)(n.code,{children:"env"})," in your current working directory. Once the process is complete, you also need to activate the virtual environment:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"source env/bin/activate\n"})}),"\n",(0,o.jsx)(n.p,{children:"If the activation was successful, then you\u2019ll see the name of your virtual environment, (env), at the beginning of your command prompt. This means that your environment setup is complete."}),"\n",(0,o.jsxs)(n.p,{children:["You can learn more about ",(0,o.jsx)(n.a,{href:"https://realpython.com/python-virtual-environments-a-primer/",children:"how to work with virtual environments in Python"}),", and ",(0,o.jsx)(n.a,{href:"https://realpython.com/learning-paths/perfect-your-python-development-setup/",children:"how to perfect your Python development setup"}),", but for your Django setup, you have all you need. You can continue with installing the django package."]}),"\n",(0,o.jsx)(n.h3,{id:"install-django",children:"Install Django"}),"\n",(0,o.jsx)(n.p,{children:"Once you\u2019ve created and activated your Python virtual environment, you can install Django into this dedicated development workspace:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"(env) $ python -m pip install django\n"})}),"\n",(0,o.jsx)(n.p,{children:"This command fetches the django package from the Python Package Index (PyPI) using pip."}),"\n",(0,o.jsx)(n.h3,{id:"pin-your-project-dependencies",children:"Pin your project dependencies"}),"\n",(0,o.jsx)(n.p,{children:"After the installation has completed, you can pin your dependencies to make sure that you\u2019re keeping track of which Django version you installed:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"(env) $ python -m pip freeze > requirements.txt\n"})}),"\n",(0,o.jsx)(n.p,{children:"This command writes the names and versions of all external Python packages that are currently in your virtual environment to a file called requirements.txt. This file will include the django package and all of its dependencies."}),"\n",(0,o.jsx)(n.p,{children:"You should always include a record of the versions of all packages you used in your project code, such as in a requirements.txt file. The requirements.txt file allows you and other programmers to reproduce the exact conditions of your project build."}),"\n",(0,o.jsx)(n.p,{children:"Suppose you\u2019re working on an existing project with its dependencies already pinned in a requirements.txt file. In that case, you can install the right Django version as well as all the other necessary packages in a single command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"(env) $ python -m pip install -r requirements.txt\n"})}),"\n",(0,o.jsx)(n.p,{children:"The command reads all names and versions of the pinned packages from your requirements.txt file and installs the specified version of each package in your virtual environment."}),"\n",(0,o.jsx)(n.p,{children:"Keeping a separate virtual environment for every project allows you to work with different versions of Django for different web application projects. Pinning the dependencies with pip freeze enables you to reproduce the environment that you need for the project to work as expected."}),"\n",(0,o.jsx)(n.h3,{id:"set-up-a-django-project",children:"Set up a Django project"}),"\n",(0,o.jsx)(n.p,{children:"After you\u2019ve successfully installed Django, you\u2019re ready to create the scaffolding for your new web application. The Django framework distinguishes between projects and apps:"}),"\n",(0,o.jsx)(n.p,{children:"A Django project is a high-level unit of organization that contains logic that governs your whole web application. Each project can contain multiple apps.\nA Django app is a lower-level unit of your web application. You can have zero to many apps in a project, and you\u2019ll usually have at least one app. You\u2019ll learn more about apps in the next section.\nWith your virtual environment set up and activated and Django installed, you can now create a project. This tutorial uses setup as an example for the project name:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"(env) $ django-admin startproject setup\n"})}),"\n",(0,o.jsx)(n.p,{children:"Running this command creates a default folder structure, which includes some Python files and your management app that has the same name as your project:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"setup/\n\u2502\n\u251c\u2500\u2500 setup/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 asgi.py\n\u2502   \u251c\u2500\u2500 settings.py\n\u2502   \u251c\u2500\u2500 urls.py\n\u2502   \u2514\u2500\u2500 wsgi.py\n\u2502\n\u2514\u2500\u2500 manage.py\n"})}),"\n",(0,o.jsx)(n.p,{children:"On the code block above, you can see the folder structure that the startproject command created for you:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"setup/ is your top-level project folder."}),"\n",(0,o.jsx)(n.li,{children:"setup/setup/ is your lower-level folder that represents your management app."}),"\n",(0,o.jsx)(n.li,{children:"manage.py is a Python file that serves as the command center of your project. It does the same as the django-admin command-line utility."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The nested setup/setup/ folder contains a couple more files that you\u2019ll edit when you work on your web application."}),"\n",(0,o.jsx)(n.p,{children:"Note: If you want to avoid creating the additional top-level project folder, you can add a dot (.) at the end of the django-admin startproject command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"(env) $ django-admin startproject <projectname> .\n"})}),"\n",(0,o.jsx)(n.p,{children:"The dot skips the top-level project folder and creates your management app and the manage.py file right inside your current working directory. You might encounter this syntax in some online Django tutorials. All it does is create the project scaffolding without an extra top-level project folder."}),"\n",(0,o.jsx)(n.p,{children:"Take a moment to explore the default project scaffolding that the django-admin command-line utility created for you. Every project that you\u2019ll make using the startproject command will have the same structure."}),"\n",(0,o.jsx)(n.p,{children:"When you\u2019re ready, you can move on to create a Django app as a lower-level unit of your new web application."}),"\n",(0,o.jsx)(n.h3,{id:"set-up-a-django-app",children:"Set up a Django app"}),"\n",(0,o.jsx)(n.p,{children:"Every project you build with Django can contain multiple Django apps. When you ran the startproject command in the previous section, you created a management app that you\u2019ll need for every default project that you\u2019ll build. Now, you\u2019ll create a Django app that\u2019ll contain the specific functionality of your web application."}),"\n",(0,o.jsx)(n.p,{children:"You don\u2019t need to use the django-admin command-line utility anymore, and you can execute the startapp command through the manage.py file instead:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"(env) $ python manage.py startapp <appname>\n"})}),"\n",(0,o.jsx)(n.p,{children:"The startapp command generates a default folder structure for a Django app. This tutorial uses example as the name for the app:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"(env) $ python manage.py startapp example\n"})}),"\n",(0,o.jsx)(n.p,{children:"Remember to replace example with your app name when you create the Django app for your personal web application."}),"\n",(0,o.jsx)(n.p,{children:"Note: If you created your project without the dot shortcut mentioned further up, you\u2019ll need to change your working directory into your top-level project folder before running the command shown above."}),"\n",(0,o.jsx)(n.p,{children:"Once the startapp command has finished execution, you\u2019ll see that Django has added another folder to your folder structure:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"setup/\n\u2502\n\u251c\u2500\u2500 example/\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 migrations/\n\u2502   \u2502   \u2514\u2500\u2500 __init__.py\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 admin.py\n\u2502   \u251c\u2500\u2500 apps.py\n\u2502   \u251c\u2500\u2500 models.py\n\u2502   \u251c\u2500\u2500 tests.py\n\u2502   \u2514\u2500\u2500 views.py\n\u2502\n\u251c\u2500\u2500 setup/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 asgi.py\n\u2502   \u251c\u2500\u2500 settings.py\n\u2502   \u251c\u2500\u2500 urls.py\n\u2502   \u2514\u2500\u2500 wsgi.py\n\u2502\n\u2514\u2500\u2500 manage.py\n"})}),"\n",(0,o.jsx)(n.p,{children:"The new folder has the name you gave it when running the command. In the case of this tutorial, that\u2019s example/. You can see that the folder contains a couple of Python files."}),"\n",(0,o.jsx)(n.p,{children:"This Django app folder is where you\u2019ll spend most of your time when creating your web application. You\u2019ll also need to make some changes in the management app, setup/, but you\u2019ll build most of your functionality inside the Django app, example/."}),"\n",(0,o.jsx)(n.p,{children:"You\u2019ll get to know the generated Python files in more detail when working through a tutorial or building your own project. Here are three notable files that were created in the app folder:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"init"}),".py: Python uses this file to declare a folder as a package, which allows Django to use code from different apps to compose the overall functionality of your web application. You probably won\u2019t have to touch this file."]}),"\n",(0,o.jsx)(n.li,{children:"models.py: You\u2019ll declare your app\u2019s models in this file, which allows Django to interface with the database of your web application."}),"\n",(0,o.jsx)(n.li,{children:"views.py: You\u2019ll write most of the code logic of your app in this file.\nAt this point, you\u2019ve finished setting up the scaffolding for your Django web application, and you can start implementing your ideas. From here on out, it\u2019s up to you what you want to build to create your own unique project."}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"register-the-app",children:"Register the app"}),"\n",(0,o.jsx)(n.p,{children:"For Django to see your new app, you need to add it to the list of installed apps in settings.py:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"INSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'example',  # <- Here\n]\n\n"})}),"\n",(0,o.jsx)(n.h3,{id:"command-reference",children:"Command Reference"}),"\n",(0,o.jsxs)(n.p,{children:["1a: Set up a virtual environment: ",(0,o.jsx)(n.code,{children:"python -m venv env"}),"\n1b: Activate the virtual environment: ",(0,o.jsx)(n.code,{children:"source env/bin/activate"}),"\n2a: Install Django: ",(0,o.jsx)(n.code,{children:"python -m pip install django"}),"\n2b: Pin your dependencies: ",(0,o.jsx)(n.code,{children:"python -m pip freeze > requirements.txt"}),"\n3: Set up a Django project: ",(0,o.jsx)(n.code,{children:"django-admin startproject <projectname>"}),"\n4: Start a Django app: ",(0,o.jsx)(n.code,{children:"python manage.py startapp <appname>"})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"models",children:"Models"}),"\n",(0,o.jsx)(n.p,{children:"A model is the single, definitive source of information about your data. It contains the essential fields and behaviors of the data you\u2019re storing. Generally, each model maps to a single database table."}),"\n",(0,o.jsx)(n.p,{children:"The basics:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Each model is a Python class that subclasses django.db.models.Model."}),"\n",(0,o.jsx)(n.li,{children:"Each attribute of the model represents a database field."}),"\n",(0,o.jsxs)(n.li,{children:["With all of this, Django gives you an automatically-generated database-access API; see ",(0,o.jsx)(n.a,{href:"https://docs.djangoproject.com/en/5.2/topics/db/queries/",children:"Making queries"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"example-model",children:"Example (Model)"}),"\n",(0,o.jsxs)(n.p,{children:["This example model defines a ",(0,o.jsx)(n.code,{children:"Person"}),", which has a ",(0,o.jsx)(n.code,{children:"first_name"})," and ",(0,o.jsx)(n.code,{children:"last_name"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"from django.db import models\n\nclass Person(models.Model):\n    first_name = models.CharField(max_length=30)\n    last_name = models.CharField(max_length=30)\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"first_name"})," and ",(0,o.jsx)(n.code,{children:"last_name"})," are fields of the model. Each field is specified as a class attribute, and each attribute maps to a database column."]}),"\n",(0,o.jsxs)(n.p,{children:["The above ",(0,o.jsx)(n.code,{children:"Person"})," model would create a database table like this:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE myapp_person (\n    "id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,\n    "first_name" varchar(30) NOT NULL,\n    "last_name" varchar(30) NOT NULL\n);\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.em,{children:"Some technical notes"}),":"]}),"\n",(0,o.jsxs)(n.p,{children:["The name of the table, ",(0,o.jsx)(n.code,{children:"myapp_person"}),", is automatically derived from some model metadata but can be overridden. See ",(0,o.jsx)(n.a,{href:"https://docs.djangoproject.com/en/5.2/ref/models/options/#table-names",children:"Table names"})," for more details."]}),"\n",(0,o.jsxs)(n.p,{children:["An id field is added automatically, but this behavior can be overridden. See ",(0,o.jsx)(n.a,{href:"https://docs.djangoproject.com/en/5.2/topics/db/models/#automatic-primary-key-fields",children:"Automatic primary key fields"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["The CREATE TABLE SQL in this example is formatted using PostgreSQL syntax, but it\u2019s worth noting Django uses SQL tailored to the database backend specified in your ",(0,o.jsx)(n.a,{href:"https://docs.djangoproject.com/en/5.2/topics/settings/",children:"settings file"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.em,{children:"Example with a larger class"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"rom django.db import models\n\nclass Todo(models.Model):\n    STATUS_CHOICES = [\n        ('pending', 'A faire'),\n        ('done', 'Termin\xe9')\n    ]\n\n    title = models.CharField(max_length=200)\n    description = models.TextField(blank=True)\n    category = models.Charfield(max_length=100)\n    status = models.CharField(max_length=30, choices=STATUS_CHOICES, default='pending')\n    author = models.CharField(max_length=100)\n    created_at = models.DateTimeField(auto_now_add=True)\n\n    def __str__(self):\n        return self.title\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"__str__"})," method return the todo title, it's good practice to always define this method in Django models for lisibility."]}),"\n",(0,o.jsx)(n.h3,{id:"migrations",children:"Migrations"}),"\n",(0,o.jsx)(n.p,{children:"Django uses a migration system to handle the different updates on the database. You can do this by executing the following commands:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"python manage.py makemigrations\npython manage.py migrate\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>r});var t=a(6540);const o={},i=t.createContext(o);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);